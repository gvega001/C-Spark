@page "/"
@using CSparkIDE.Shared.Services
@inject IFormFactor FormFactor

<PageTitle>Home</PageTitle>

<style>
    /* Layout Container */
    .dashboard-container {
        max-width: 1100px;
        margin: auto;
        padding: 20px;
        font-family: Arial, sans-serif;
    }

    /* Grid Layout */
    .dashboard-grid {
        display: grid;
        grid-template-columns: 2fr 1fr;
        grid-gap: 20px;
        margin-top: 20px;
    }

    /* Card Styling */
    .card {
        background: #ffffff;
        border: 1px solid #ddd;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s ease-in-out;
    }

        .card:hover {
            transform: scale(1.02);
        }

    /* Welcome Section */
    .welcome-banner {
        background: linear-gradient(to right, #007acc, #61dafb);
        color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
    }

    h1 {
        font-size: 2.2rem;
        margin: 0;
    }

    h2 {
        font-size: 1.6rem;
        margin-bottom: 15px;
    }

    /* Quick Actions */
    .quick-actions {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-gap: 15px;
        text-align: center;
    }

    .quick-link {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-decoration: none;
        font-weight: bold;
        padding: 15px;
        border-radius: 8px;
        background: #f5f5f5;
        transition: all 0.2s ease-in-out;
        color: #007acc;
    }

        .quick-link:hover {
            background: #007acc;
            color: white;
        }

    /* Recent Projects */
    .recent-projects ul {
        list-style: none;
        padding: 0;
    }

    .recent-projects li {
        padding: 8px;
        border-bottom: 1px solid #eee;
    }

    .recent-projects a {
        text-decoration: none;
        color: #d63384;
    }

        .recent-projects a:hover {
            text-decoration: underline;
        }

    /* Platform Info */
    .platform-info {
        background: #f9f9f9;
        padding: 15px;
        border-radius: 10px;
        text-align: center;
    }

    /* Icon Styling */
    .icon {
        font-size: 24px;
        margin-bottom: 5px;
    }
</style>

<div class="dashboard-container">
    <!-- Welcome Section -->
    <div class="welcome-banner">
        <h1>Welcome to C-Spark IDE!</h1>
        <p>Empowering students to learn programming in an interactive environment.</p>
    </div>

    <!-- Dashboard Grid -->
    <div class="dashboard-grid">
        <!-- Left Column -->
        <div>
            <!-- Quick Start Guide -->
            <div class="card">
                <h2>Quick Start Guide</h2>
                <div class="quick-actions">
                    <NavLink href="projects" class="quick-link">
                        <i class="fas fa-folder icon"></i> View Projects
                    </NavLink>
                    <NavLink href="editor" class="quick-link">
                        <i class="fas fa-code icon"></i> Open Code Editor
                    </NavLink>
                    <NavLink href="debugger" class="quick-link">
                        <i class="fas fa-bug icon"></i> Debug Code
                    </NavLink>
                    <NavLink href="settings" class="quick-link">
                        <i class="fas fa-cogs icon"></i> Configure Settings
                    </NavLink>
                </div>
            </div>

            <!-- Recent Projects -->
            <div class="card recent-projects">
                <h2>Recent Projects</h2>
                @if (RecentProjects.Any())
                {
                    <ul>
                        @foreach (var project in RecentProjects)
                        {
                            <li>
                                <NavLink href="@($"editor?project={project.Id}")">
                                    <i class="fas fa-file-code icon"></i> @project.Name - Last opened on @project.LastModified.ToString("MMMM dd, yyyy")
                                </NavLink>
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p>No recent projects found. Start a <NavLink href="projects">new project</NavLink> today!</p>
                }
            </div>
        </div>

        <!-- Right Column -->
        <div>
            <!-- Platform Info -->
            <div class="card platform-info">
                <h2>System Info</h2>
                <p><strong>Device Form Factor:</strong> @factor</p>
                <p><strong>Platform:</strong> @platform</p>
            </div>
        </div>
    </div>
</div>

<!-- FontAwesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />

@code {
    private string factor => FormFactor.GetFormFactor();
    private string platform => FormFactor.GetPlatform();

    private List<ProjectModel> RecentProjects = new List<ProjectModel>
    {
        new ProjectModel { Id = 1, Name = "Hello World", LastModified = DateTime.Now.AddDays(-2) },
        new ProjectModel { Id = 2, Name = "Game Logic", LastModified = DateTime.Now.AddDays(-5) }
    };

    private class ProjectModel
    {
        public int Id { get; set; }
        public string? Name { get; set; }
        public DateTime LastModified { get; set; }
    }
}
